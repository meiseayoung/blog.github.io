<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class="line">  1</span> <span class="COMM">/**
<span class="line">  2</span>  * @fileOverview  
<span class="line">  3</span>  * &lt;pre&gt;
<span class="line">  4</span>  * 获取存储数据类组件，并对数据进行管理,其中allData和data需要说明：allData是所有的数据，是原始数据;而data是对allData
<span class="line">  5</span>  * 进行操作后的数据，比如翻页或过滤后的数据。而getData接口是返回的allData
<span class="line">  6</span>  * 2013/4/16
<span class="line">  7</span>  * &lt;a href="www.huawei.com"&gt;http://www.huawei.com&lt;/a&gt;
<span class="line">  8</span>  * Huawei Technologies Co., Ltd. Copyright 1998-2013,  All rights reserved 
<span class="line">  9</span>  * &lt;/pre&gt;
<span class="line"> 10</span>  * @version 1.0
<span class="line"> 11</span>  */</span><span class="WHIT">
<span class="line"> 12</span> </span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 13</span> 
<span class="line"> 14</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">beforeLoadKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"beforeLoad"</span><span class="PUNC">,</span><span class="WHIT">
<span class="line"> 15</span> </span><span class="WHIT">        </span><span class="NAME">afterLoadKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"afterLoad"</span><span class="PUNC">,</span><span class="WHIT">
<span class="line"> 16</span> </span><span class="WHIT">        </span><span class="NAME">defaultContentType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"application/json;charset=UTF-8"</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 17</span> 
<span class="line"> 18</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class="line"> 19</span>      * @description 获取存储数据组件
<span class="line"> 20</span>      * @name Sweet.Store
<span class="line"> 21</span>      * @class
<span class="line"> 22</span>      * @extends Sweet.Base
<span class="line"> 23</span>      * @requires
<span class="line"> 24</span>      * &lt;pre&gt;
<span class="line"> 25</span>      * base.js
<span class="line"> 26</span>      * sweet.base.js
<span class="line"> 27</span>      * &lt;/pre&gt;
<span class="line"> 28</span>      * @example
<span class="line"> 29</span>      */</span><span class="WHIT">
<span class="line"> 30</span> </span><span class="WHIT">    </span><span class="NAME">Sweet.Store</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Sweet.Base.extend</span><span class="PUNC">(</span><span class="COMM">/** @lends Sweet.Store.prototype*/</span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 31</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line"> 32</span>          * @private
<span class="line"> 33</span>          * @description 组件名称
<span class="line"> 34</span>          */</span><span class="WHIT">
<span class="line"> 35</span> </span><span class="WHIT">        </span><span class="NAME">sweetWidgetName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"[Sweet-Store]"</span><span class="PUNC">,</span><span class="WHIT">
<span class="line"> 36</span> </span><span class="WHIT">        </span><span class="NAME">eventNames</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends Sweet.Store.prototype*/</span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 37</span> </span><span class="WHIT">            </span><span class="COMM">/**
<span class="line"> 38</span>              * @event 填充组件值事件
<span class="line"> 39</span>              */</span><span class="WHIT">
<span class="line"> 40</span> </span><span class="WHIT">            </span><span class="NAME">setData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"填充组件值"</span><span class="WHIT">
<span class="line"> 41</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line"> 42</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line"> 43</span>          * @description 设置发送请求数据
<span class="line"> 44</span>          * @param {Object} params JSON格式参数，格式
<span class="line"> 45</span>          *  {
<span class="line"> 46</span>          *      baseParams: baseParams,     // 基本参数，每次请求都会携带
<span class="line"> 47</span>          *      reader: reader,             // 解析数据reader
<span class="line"> 48</span>          *      url: url,                   // 请求URL
<span class="line"> 49</span>          *      timeout : null,             //默认不设置超时时间
<span class="line"> 50</span>          *      loadMask: true,             // 是否有遮罩，默认有且是全局遮罩，局部遮罩由各widget单独实现
<span class="line"> 51</span>          *      contentType: "",            // conetentType，默认application/json;charset=UTF-8
<span class="line"> 52</span>          *      async: true,                // 是否异步请求
<span class="line"> 53</span>          *      failCallBack : function(){},//发送请求时，如果返回error中时的回调处理函数
<span class="line"> 54</span>          *      cache: Boolean,             // 是否需要缓存数据，默认false，如果设置为true，store只会发送一次请求
<span class="line"> 55</span>          *                                  // 约定设置为cache后，需要在baseParams或params中设置start、limit值
<span class="line"> 56</span>          *      beforeSend ： function,     //为了满足发送ajax请求时，需要拼不同的参数时，注册的回调
<span class="line"> 57</span>          *      isRequest : boolean         //只有设置cache : true时才有效，表示store是否需要发送一次请求
<span class="line"> 58</span>          *                                  //false : 不发送一次请求，数据全由用户设置到store中
<span class="line"> 59</span>          *                                  //true : 只发送一次请求
<span class="line"> 60</span>          *  }
<span class="line"> 61</span>          */</span><span class="WHIT">
<span class="line"> 62</span> </span><span class="WHIT">        </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 63</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 64</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 65</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 66</span> </span><span class="WHIT">            </span><span class="NAME">this.baseParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.baseParams</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 67</span> </span><span class="WHIT">            </span><span class="NAME">this.params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 68</span> </span><span class="WHIT">            </span><span class="NAME">this.reader</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.reader</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 69</span> </span><span class="WHIT">            </span><span class="NAME">this.url</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.url</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 70</span> </span><span class="WHIT">            </span><span class="NAME">this.failCallBack</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.failCallBack</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 71</span> </span><span class="WHIT">            </span><span class="NAME">this.loadMask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">params.loadMask</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">params.loadMask</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 72</span> </span><span class="WHIT">            </span><span class="NAME">this.contentType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.contentType</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">defaultContentType</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 73</span> </span><span class="WHIT">            </span><span class="NAME">this.async</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$.isUndefined</span><span class="PUNC">(</span><span class="NAME">params.async</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">params.async</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 74</span> </span><span class="WHIT">            </span><span class="NAME">this.cache</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">params.cache</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">params.cache</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 75</span> </span><span class="WHIT">            </span><span class="COMM">/**
<span class="line"> 76</span>              * 只有设置cache : true时才有效，表示store是否需要发送一次请求
<span class="line"> 77</span>              * false : 不发送一次请求，数据全由用户设置到store中
<span class="line"> 78</span>              * true : 只发送一次请求
<span class="line"> 79</span>              */</span><span class="WHIT">
<span class="line"> 80</span> </span><span class="WHIT">            </span><span class="NAME">this.isRequest</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">params.isRequest</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">params.isRequest</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 81</span> </span><span class="WHIT">            </span><span class="COMM">/**
<span class="line"> 82</span>              * 为了满足发送ajax请求时，需要拼不同的参数时，注册的回调
<span class="line"> 83</span>              */</span><span class="WHIT">
<span class="line"> 84</span> </span><span class="WHIT">            </span><span class="NAME">this.beforeSend</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">params.beforeSend</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">""</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">params.beforeSend</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 85</span> </span><span class="WHIT">            </span><span class="NAME">this.timeout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">params.timeout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">""</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">params.timeout</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 86</span> </span><span class="WHIT">            </span><span class="NAME">this.data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 87</span> </span><span class="WHIT">            </span><span class="NAME">this.allData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 88</span> </span><span class="WHIT">            </span><span class="NAME">this.handlers</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 89</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line"> 90</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line"> 91</span>          * @private
<span class="line"> 92</span>          * @description 主要是给gridStore继承实现使用，进行清空过滤值
<span class="line"> 93</span>          */</span><span class="WHIT">
<span class="line"> 94</span> </span><span class="WHIT">        </span><span class="NAME">clearFilters</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">$.noop</span><span class="PUNC">,</span><span class="WHIT">
<span class="line"> 95</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line"> 96</span>          * @private
<span class="line"> 97</span>          * @description 主要是给gridStore继承实现使用，进行清空排序值
<span class="line"> 98</span>          */</span><span class="WHIT">
<span class="line"> 99</span> </span><span class="WHIT">        </span><span class="NAME">clearOrders</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">$.noop</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">100</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">101</span>          * @description 更新store中的基础参数，如果不再需要baseParams，设置为{}即可
<span class="line">102</span>          * @param {Object/Array} baseParams 基础的参数
<span class="line">103</span>          */</span><span class="WHIT">
<span class="line">104</span> </span><span class="WHIT">        </span><span class="NAME">setBaseParams</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">baseParams</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class="line">105</span> </span><span class="WHIT">            </span><span class="NAME">this.baseParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">baseParams</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">106</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">107</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">108</span>          * @private
<span class="line">109</span>          * @description 发送请求，加载数据
<span class="line">110</span>          * @param {Object} params 提交参数
<span class="line">111</span>          * @param {Boolean} add 追加还是覆盖，默认覆盖
<span class="line">112</span>          * @param {String} eventName 指定触发的事件名称
<span class="line">113</span>          * @param {Object} anotherParams 传递给注册函数的参数
<span class="line">114</span>          */</span><span class="WHIT">
<span class="line">115</span> </span><span class="WHIT">        </span><span class="NAME">_loadRemoteData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">116</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">117</span> </span><span class="WHIT">                    </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">118</span> </span><span class="WHIT">                    </span><span class="NAME">tempParams</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">119</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">120</span> </span><span class="WHIT">                </span><span class="NAME">me.params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">121</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">122</span> </span><span class="WHIT">            </span><span class="NAME">tempParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">me.baseParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">me.params</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">123</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">me.beforeSend</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">$.isFunction</span><span class="PUNC">(</span><span class="NAME">me.beforeSend</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class="line">124</span> </span><span class="WHIT">                </span><span class="NAME">tempParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.beforeSend</span><span class="PUNC">(</span><span class="NAME">tempParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">125</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">126</span> </span><span class="WHIT">            </span><span class="NAME">config</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">127</span> </span><span class="WHIT">                </span><span class="NAME">url</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">me.url</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">128</span> </span><span class="WHIT">                </span><span class="NAME">async</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">me.async</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">129</span> </span><span class="WHIT">                </span><span class="NAME">loadMask</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">me.loadMask</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">130</span> </span><span class="WHIT">                </span><span class="NAME">data</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">defaultContentType</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">me.contentType</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">JSON.stringify</span><span class="PUNC">(</span><span class="NAME">tempParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tempParams</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">131</span> </span><span class="WHIT">                </span><span class="NAME">contentType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">me.contentType</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">132</span> </span><span class="WHIT">                </span><span class="NAME">success</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">133</span> </span><span class="WHIT">                    </span><span class="NAME">me._pretreatmentData</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">134</span> </span><span class="WHIT">                    </span><span class="NAME">me._callBack</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">135</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">136</span> </span><span class="WHIT">                </span><span class="NAME">error</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">XMLHttpRequest</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">status</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">errorThrown</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">137</span> </span><span class="WHIT">                    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">me.failCallBack</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">$.isFunction</span><span class="PUNC">(</span><span class="NAME">me.failCallBack</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class="line">138</span> </span><span class="WHIT">                        </span><span class="NAME">me.failCallBack</span><span class="PUNC">(</span><span class="NAME">XMLHttpRequest</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">status</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">errorThrown</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">139</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">140</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">141</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">142</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">me.timeout</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class="line">143</span> </span><span class="WHIT">                </span><span class="NAME">config.timeout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.timeout</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">144</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">145</span> </span><span class="WHIT">            </span><span class="COMM">// 发送请求</span><span class="WHIT">
<span class="line">146</span> </span><span class="WHIT">            </span><span class="NAME">Sweet.Ajax.request</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">147</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">148</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">149</span>          * @private
<span class="line">150</span>          * @description 对返回数据处理，判断是否追加数据
<span class="line">151</span>          * @param {Boolean} add true 追加
<span class="line">152</span>          * @param {Object/Array} data 数据
<span class="line">153</span> 		 * @param {String} eventName 事件名称
<span class="line">154</span>          */</span><span class="WHIT">
<span class="line">155</span> </span><span class="WHIT">        </span><span class="NAME">_pretreatmentData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">156</span> </span><span class="WHIT">            </span><span class="COMM">// 缓存请求加载的数据</span><span class="WHIT">
<span class="line">157</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">158</span> </span><span class="WHIT">                    </span><span class="NAME">tempData1</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.reader.read</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">159</span> </span><span class="WHIT">                    </span><span class="NAME">tempData2</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me._dealForList</span><span class="PUNC">(</span><span class="NAME">tempData1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">160</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">add</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">161</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isPlainObject</span><span class="PUNC">(</span><span class="NAME">me.allData</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">162</span> </span><span class="WHIT">                    </span><span class="NAME">me.allData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.allData.data.concat</span><span class="PUNC">(</span><span class="NAME">tempData2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">163</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">164</span> </span><span class="WHIT">                    </span><span class="NAME">me.allData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.allData.concat</span><span class="PUNC">(</span><span class="NAME">tempData2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">165</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">166</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">167</span> </span><span class="WHIT">                </span><span class="NAME">me.allData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tempData2</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">168</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">169</span> </span><span class="WHIT">            </span><span class="NAME">me.data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tempData1</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">170</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">171</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">172</span>          * @private
<span class="line">173</span>          * @description list延迟加载时，返回{total: 100, data: []}结构数据
<span class="line">174</span>          * @param {Object/Array} data 数据
<span class="line">175</span>          */</span><span class="WHIT">
<span class="line">176</span> </span><span class="WHIT">        </span><span class="NAME">_dealForList</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">177</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">178</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">179</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">180</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isPlainObject</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">181</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">data.data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">182</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">183</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">184</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">185</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">186</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">187</span>          * @private
<span class="line">188</span>          * @description 构造list延迟加载返回数据，返回{total: 100, data: []}结构数据
<span class="line">189</span>          */</span><span class="WHIT">
<span class="line">190</span> </span><span class="WHIT">        </span><span class="NAME">_returnForList</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">191</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">192</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isPlainObject</span><span class="PUNC">(</span><span class="NAME">me.data</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">193</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="STRN">"total"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">me.data.total</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"data"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">194</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">195</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">196</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">197</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">198</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">199</span>          * @private
<span class="line">200</span>          * @description 回调注册的函数
<span class="line">201</span>          * @param {String} eventName 指定触发的事件名称
<span class="line">202</span>          * @param {Object} anotherParams 传递给注册函数的参数
<span class="line">203</span>          * @param {Boolean} add 是否不刷新表格,否则如果有分页条只刷新分页信息
<span class="line">204</span>          */</span><span class="WHIT">
<span class="line">205</span> </span><span class="WHIT">        </span><span class="NAME">_callBack</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">206</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">207</span> </span><span class="WHIT">                    </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me._dealData</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">208</span> </span><span class="WHIT">            </span><span class="COMM">//如果是filter调用</span><span class="WHIT">
<span class="line">209</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">anotherParams</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">210</span> </span><span class="WHIT">                </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">211</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">212</span> </span><span class="WHIT">            </span><span class="COMM">// 优先触发指定的事件</span><span class="WHIT">
<span class="line">213</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.handlers</span><span class="PUNC">[</span><span class="NAME">eventName</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">214</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">anotherParams</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">215</span> </span><span class="WHIT">                    </span><span class="NAME">me.handlers.scope.options.expand</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">216</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">217</span> </span><span class="WHIT">                    </span><span class="NAME">me.handlers.scope.options.expand</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">218</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">219</span> </span><span class="WHIT">                </span><span class="NAME">anotherParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">220</span> </span><span class="WHIT">                </span><span class="NAME">me.handlers</span><span class="PUNC">[</span><span class="NAME">eventName</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">call</span><span class="PUNC">(</span><span class="NAME">me.handlers.scope</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">221</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.handlers.setData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">222</span> </span><span class="WHIT">                </span><span class="NAME">me.handlers.setData.call</span><span class="PUNC">(</span><span class="NAME">me.handlers.scope</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">223</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">224</span> </span><span class="WHIT">            
<span class="line">225</span>             </span><span class="NAME">me._afterLoad</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">226</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">227</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">228</span>          * @private
<span class="line">229</span>          * @description 处理数据，区分缓存加载和后台加载
<span class="line">230</span>          */</span><span class="WHIT">
<span class="line">231</span> </span><span class="WHIT">        </span><span class="NAME">_dealData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">232</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">233</span> </span><span class="WHIT">                    </span><span class="NAME">data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">234</span> 
<span class="line">235</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.cache</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">236</span> </span><span class="WHIT">                </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">start</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">237</span> </span><span class="WHIT">                        </span><span class="NAME">limit</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">238</span> </span><span class="WHIT">                        </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">239</span> </span><span class="WHIT">                        </span><span class="NAME">tempData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me._dealForList</span><span class="PUNC">(</span><span class="NAME">me.data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">240</span> </span><span class="WHIT">                </span><span class="COMM">// 优先查看this.params参数</span><span class="WHIT">
<span class="line">241</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.params</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">$.isUndefined</span><span class="PUNC">(</span><span class="NAME">me.params.start</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">242</span> </span><span class="WHIT">                    </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.params</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">243</span> </span><span class="WHIT">                    </span><span class="COMM">// 再查看this.baseParams参数</span><span class="WHIT">
<span class="line">244</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.baseParams</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">$.isUndefined</span><span class="PUNC">(</span><span class="NAME">me.baseParams.start</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">245</span> </span><span class="WHIT">                    </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me.baseParams</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">246</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">247</span> </span><span class="WHIT">                </span><span class="NAME">start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.start</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">248</span> </span><span class="WHIT">                </span><span class="NAME">limit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params.limit</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">tempData.length</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">249</span> </span><span class="WHIT">                </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tempData.slice</span><span class="PUNC">(</span><span class="NAME">start</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">start</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">limit</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">250</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">251</span> </span><span class="WHIT">                </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">me._dealForList</span><span class="PUNC">(</span><span class="NAME">me.data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">252</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">253</span> 
<span class="line">254</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">me._returnForList</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">255</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">256</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">257</span>          * @description 加载数据，该方法必须在load、loadData、reload方法之后调用
<span class="line">258</span>          * @param {Object} params 参数
<span class="line">259</span>          * @param {Boolean} add 追加还是覆盖，默认覆盖
<span class="line">260</span>          * @param {String} eventName 指定触发的事件名称
<span class="line">261</span>          * @param {Object} anotherParams 传递给注册函数的参数
<span class="line">262</span>          */</span><span class="WHIT">
<span class="line">263</span> </span><span class="WHIT">        </span><span class="NAME">loadRecords</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">264</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">265</span> </span><span class="WHIT">            </span><span class="NAME">me.params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">266</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.cache</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">267</span> </span><span class="WHIT">                </span><span class="NAME">me._callBack</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">268</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">269</span> </span><span class="WHIT">                </span><span class="NAME">me.load</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">270</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">271</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">272</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">273</span>          * @description 为组件注入数据
<span class="line">274</span>          * @param {Array} data 数据
<span class="line">275</span>          * @param {Boolean} add 追加还是覆盖，默认覆盖
<span class="line">276</span>          * @param {String} eventName 指定触发的事件名称
<span class="line">277</span>          * @param {Object} anotherParams 传递给注册函数的参数
<span class="line">278</span>          * @param {boolean} isResetParams 是否不重置翻页信息(表格翻页时设置的值)，默认重置:false，如果不需要重置，设置true
<span class="line">279</span>          */</span><span class="WHIT">
<span class="line">280</span> </span><span class="WHIT">        </span><span class="NAME">loadData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">isResetParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">281</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">282</span> </span><span class="WHIT">            </span><span class="COMM">//前台缓存，但用户自己发请求使用loadData设置数据，且监控翻页后仍然需要显示当前页面时使用</span><span class="WHIT">
<span class="line">283</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">isResetParams</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class="line">284</span> </span><span class="WHIT">                </span><span class="NAME">me._resetParamStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">285</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">286</span> </span><span class="WHIT">            </span><span class="NAME">me._pretreatmentData</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">287</span> </span><span class="WHIT">            </span><span class="NAME">me._callBack</span><span class="PUNC">(</span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">288</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">289</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">290</span>          * @description 加载数据
<span class="line">291</span>          * @param {Object} params 发送请求时可以追加参数
<span class="line">292</span>          * @param {Boolean} add 追加还是覆盖，默认覆盖
<span class="line">293</span>          * @param {String} eventName 指定触发的事件名称，可选
<span class="line">294</span>          * @param {Object} anotherParams 传递给注册函数的参数
<span class="line">295</span>          */</span><span class="WHIT">
<span class="line">296</span> </span><span class="WHIT">        </span><span class="NAME">load</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">297</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">298</span> </span><span class="WHIT">            </span><span class="NAME">me._beforeLoad</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">299</span> </span><span class="WHIT">            </span><span class="NAME">me._loadRemoteData</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">add</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anotherParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">300</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">301</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">302</span>          * @description 重新加载数据，无参数，参数是上一次load时传递的参数
<span class="line">303</span>          */</span><span class="WHIT">
<span class="line">304</span> </span><span class="WHIT">        </span><span class="NAME">reload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">305</span> </span><span class="WHIT">            </span><span class="NAME">this._resetParamStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">306</span> </span><span class="WHIT">            </span><span class="NAME">this._beforeLoad</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">307</span> </span><span class="WHIT">            </span><span class="NAME">this._loadRemoteData</span><span class="PUNC">(</span><span class="NAME">this.params</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">308</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">309</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">310</span>          * @description 返回所有的数据
<span class="line">311</span>          */</span><span class="WHIT">
<span class="line">312</span> </span><span class="WHIT">        </span><span class="NAME">getData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">313</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.allData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">314</span> </span><span class="WHIT">                </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">$.objClone</span><span class="PUNC">(</span><span class="NAME">this.allData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">315</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">316</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">317</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">318</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">319</span>          * @description 删除数据
<span class="line">320</span>          * @param {Object} data 待删除数据
<span class="line">321</span>          */</span><span class="WHIT">
<span class="line">322</span> </span><span class="WHIT">        </span><span class="NAME">removeData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">323</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">324</span> </span><span class="WHIT">            </span><span class="COMM">// 如果参数为空，进行全部删除操作</span><span class="WHIT">
<span class="line">325</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">326</span> </span><span class="WHIT">                </span><span class="NAME">me.allData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">327</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">328</span> </span><span class="WHIT">                </span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">me.allData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">329</span> </span><span class="WHIT">                    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">obj.value</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">data.value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">330</span> </span><span class="WHIT">                        </span><span class="NAME">me.allData.splice</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">331</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">332</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">333</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">334</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">335</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">336</span>          * @description 返回过滤后的数据
<span class="line">337</span>          * @param {String} field 将过滤的目标字段
<span class="line">338</span>          * @param {String/RegExp} value 过滤值或正则
<span class="line">339</span>          * @param {Boolean} filterDir description
<span class="line">340</span>          * @param {Array} data 传入过滤的数据
<span class="line">341</span>          * @return {Array} 返回过滤后的数据
<span class="line">342</span>          */</span><span class="WHIT">
<span class="line">343</span> </span><span class="WHIT">        </span><span class="NAME">filter</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filterDir</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">344</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">345</span> </span><span class="WHIT">                    </span><span class="NAME">filter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">346</span> </span><span class="WHIT">                    </span><span class="NAME">testResult</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">347</span> </span><span class="WHIT">                    </span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">348</span> </span><span class="WHIT">                    </span><span class="NAME">allNull</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">349</span> </span><span class="WHIT">            </span><span class="NAME">filterDir</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">filterDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">350</span> </span><span class="WHIT">            </span><span class="NAME">me._beforeLoad</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">351</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">352</span> </span><span class="WHIT">                </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$.objClone</span><span class="PUNC">(</span><span class="NAME">me.allData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">353</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">354</span> 
<span class="line">355</span> </span><span class="WHIT">            </span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">childData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">356</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">childData</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class="line">357</span> </span><span class="WHIT">                </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">358</span> </span><span class="WHIT">                    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">childData.children</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">childData.children.length</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">359</span> </span><span class="WHIT">                        </span><span class="COMM">//filterDir:true为带目录过滤，否则为叶子节点过滤</span><span class="WHIT">
<span class="line">360</span> </span><span class="WHIT">                        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">filterDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">361</span> </span><span class="WHIT">                            </span><span class="COMM">//判断目录是否匹配</span><span class="WHIT">
<span class="line">362</span> </span><span class="WHIT">                            </span><span class="NAME">testResult</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">363</span> </span><span class="WHIT">                            </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childData.text</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">364</span> </span><span class="WHIT">                            </span><span class="NAME">testResult</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value.test</span><span class="PUNC">(</span><span class="NAME">text</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">365</span> </span><span class="WHIT">                            </span><span class="COMM">//判断是否包含过滤字符串</span><span class="WHIT">
<span class="line">366</span> </span><span class="WHIT">                            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">testResult</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">367</span> </span><span class="WHIT">                                </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">368</span> </span><span class="WHIT">                            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">369</span> </span><span class="WHIT">                                </span><span class="NAME">me.filter</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filterDir</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">childData.children</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">370</span> </span><span class="WHIT">                            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">371</span> </span><span class="WHIT">                        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">372</span> </span><span class="WHIT">                            </span><span class="NAME">me.filter</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filterDir</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">childData.children</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">373</span> </span><span class="WHIT">                        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">374</span> </span><span class="WHIT">                        </span><span class="COMM">//判断chilData.children是否都为空</span><span class="WHIT">
<span class="line">375</span> </span><span class="WHIT">                        </span><span class="NAME">allNull</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">376</span> </span><span class="WHIT">                        </span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">childData.children</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">child</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">377</span> </span><span class="WHIT">                            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">$.isNull</span><span class="PUNC">(</span><span class="NAME">child</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">378</span> </span><span class="WHIT">                                </span><span class="NAME">allNull</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">379</span> </span><span class="WHIT">                            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">380</span> </span><span class="WHIT">                        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">381</span> </span><span class="WHIT">                        </span><span class="COMM">//删除没有叶子的节点</span><span class="WHIT">
<span class="line">382</span> </span><span class="WHIT">                        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">allNull</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">383</span> </span><span class="WHIT">                            </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">[</span><span class="NAME">index</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">384</span> </span><span class="WHIT">                        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">385</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">386</span> </span><span class="WHIT">                        </span><span class="NAME">testResult</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">387</span> </span><span class="WHIT">                        </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">childData.text</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">388</span> </span><span class="WHIT">                        </span><span class="NAME">testResult</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value.test</span><span class="PUNC">(</span><span class="NAME">text</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">389</span> </span><span class="WHIT">                        </span><span class="COMM">//判断是否包含过滤字符串</span><span class="WHIT">
<span class="line">390</span> </span><span class="WHIT">                        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">testResult</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">391</span> </span><span class="WHIT">                            </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">[</span><span class="NAME">index</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">392</span> </span><span class="WHIT">                        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">393</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">394</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">395</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">396</span> </span><span class="WHIT">            
<span class="line">397</span>             </span><span class="NAME">me.data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">398</span> </span><span class="WHIT">            </span><span class="NAME">me._callBack</span><span class="PUNC">(</span><span class="STRN">"setData"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">{</span><span class="STRN">"data"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">$.deleteUndefinedData</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"filter"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">399</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">400</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">401</span>          * @TODO 待实现
<span class="line">402</span>          * @description 实现数据排序功能
<span class="line">403</span>          * @param {String/Array} field 排序目标字段或数组，如果是数组，格式约定为[{key: , order: }, ...]
<span class="line">404</span>          * @param {String} order 排序类型，取值范围 ASC:升序，DESC:降序，默认升序
<span class="line">405</span>          */</span><span class="WHIT">
<span class="line">406</span> </span><span class="WHIT">        </span><span class="NAME">sort</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">order</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">407</span> </span><span class="WHIT">            </span><span class="NAME">this._beforeLoad</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">408</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">409</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">sorts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">410</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">sortType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">order</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">Sweet.constants.sortType.ASC</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">411</span> 
<span class="line">412</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">"string"</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">$.type</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">413</span> </span><span class="WHIT">                </span><span class="NAME">sorts.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="STRN">"key"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"order"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">sortType</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">414</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">"array"</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">$.type</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">415</span> </span><span class="WHIT">                </span><span class="NAME">sorts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">416</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">417</span> </span><span class="WHIT">                </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Store.sort() Unsupported type!"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">418</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">419</span> 
<span class="line">420</span> </span><span class="WHIT">            </span><span class="COMM">// 将start值清零</span><span class="WHIT">
<span class="line">421</span> </span><span class="WHIT">            </span><span class="NAME">me._resetParamStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">422</span> 
<span class="line">423</span> </span><span class="WHIT">            </span><span class="COMM">// 对me.data数据进行排序</span><span class="WHIT">
<span class="line">424</span> </span><span class="WHIT">            </span><span class="COMM">// TODO 暂支持单列，需要扩展支持多列排序</span><span class="WHIT">
<span class="line">425</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.cache</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">426</span> </span><span class="WHIT">                </span><span class="NAME">me.data.sort</span><span class="PUNC">(</span><span class="NAME">$.objSort</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">sortType</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">427</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">428</span> 
<span class="line">429</span> </span><span class="WHIT">            </span><span class="COMM">// 加载数据</span><span class="WHIT">
<span class="line">430</span> </span><span class="WHIT">            </span><span class="NAME">me.loadRecords</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="STRN">"orders"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">sorts</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">431</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">432</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">433</span>          * @private
<span class="line">434</span>          * @description 加载数据前处理，可以修改提交参数，直接覆盖this.baseParams和this.params即可
<span class="line">435</span>          */</span><span class="WHIT">
<span class="line">436</span> </span><span class="WHIT">        </span><span class="NAME">_beforeLoad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">437</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.handlers</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">438</span> </span><span class="WHIT">                </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">beforeLoadFunc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.handlers</span><span class="PUNC">[</span><span class="NAME">beforeLoadKey</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">439</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">beforeLoadFunc</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">$.isFunction</span><span class="PUNC">(</span><span class="NAME">beforeLoadFunc</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">440</span> </span><span class="WHIT">                    </span><span class="NAME">beforeLoadFunc.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">441</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">442</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">443</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">444</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">445</span>          * @private
<span class="line">446</span>          * @description 加载数据后处理
<span class="line">447</span>          */</span><span class="WHIT">
<span class="line">448</span> </span><span class="WHIT">        </span><span class="NAME">_afterLoad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">449</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.handlers</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">450</span> </span><span class="WHIT">                </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">afterLoadFunc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.handlers</span><span class="PUNC">[</span><span class="NAME">afterLoadKey</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">451</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">afterLoadFunc</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">$.isFunction</span><span class="PUNC">(</span><span class="NAME">afterLoadFunc</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">452</span> </span><span class="WHIT">                    </span><span class="NAME">afterLoadFunc.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">453</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">454</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">455</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">456</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">457</span>          * @private
<span class="line">458</span>          * @description 重新设置params参数值
<span class="line">459</span>          * @param {Object} obj 参数
<span class="line">460</span>          */</span><span class="WHIT">
<span class="line">461</span> </span><span class="WHIT">        </span><span class="NAME">_resetParams</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">462</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">463</span> </span><span class="WHIT">            </span><span class="COMM">// 将start值清零</span><span class="WHIT">
<span class="line">464</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.params</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">465</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.params.start</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">me.params.limit</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">466</span> </span><span class="WHIT">                    </span><span class="NAME">me.params.start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.start</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">467</span> </span><span class="WHIT">                    </span><span class="NAME">me.params.limit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.limit</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">468</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">469</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">470</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">471</span> </span><span class="WHIT">        </span><span class="COMM">/**
<span class="line">472</span>          * @private
<span class="line">473</span>          * @description 将开始值清零
<span class="line">474</span>          */</span><span class="WHIT">
<span class="line">475</span> </span><span class="WHIT">        </span><span class="NAME">_resetParamStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">476</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">me</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">477</span> </span><span class="WHIT">            </span><span class="COMM">// 优先查看this.params参数</span><span class="WHIT">
<span class="line">478</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.params</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">479</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.params.start</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">480</span> </span><span class="WHIT">                    </span><span class="NAME">me.params.start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">481</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">482</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">483</span> </span><span class="WHIT">            </span><span class="COMM">// 再查看this.baseParams参数</span><span class="WHIT">
<span class="line">484</span> </span><span class="WHIT">            </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.baseParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">485</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">me.baseParams.start</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">486</span> </span><span class="WHIT">                    </span><span class="NAME">me.baseParams.start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">487</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">488</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">489</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">490</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">491</span> </span><span class="PUNC">}</span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>